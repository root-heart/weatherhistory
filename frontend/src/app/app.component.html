<header>
    <h1>wetterchroniken</h1>
</header>

<nav>

    <map-dropdown #mapDropdown></map-dropdown>

    <div class="monthly" (click)="filter(DateRangeFilter.MONTHLY)">
        <fa-icon [icon]="faSquareChecked"
                 *ngIf="filterService.dateRangeFilter === DateRangeFilter.MONTHLY"></fa-icon>
        <fa-icon [icon]="faSquare"
                 *ngIf="filterService.dateRangeFilter !== DateRangeFilter.MONTHLY"></fa-icon>
        <span>Monat</span>
        <!--    <span>1999 - 2020</span>-->
    </div>

    <div class="yearly" (click)="filter(DateRangeFilter.YEARLY)">
        <fa-icon [icon]="faSquareChecked"
                 *ngIf="filterService.dateRangeFilter === DateRangeFilter.YEARLY"></fa-icon>
        <fa-icon [icon]="faSquare"
                 *ngIf="filterService.dateRangeFilter !== DateRangeFilter.YEARLY"></fa-icon>
        <span>Jahr</span>
        <!--    <span>1999 - 2020</span>-->
    </div>

    <div class="long-term" (click)="filter(DateRangeFilter.LONG_TERM)">
        <fa-icon [icon]="faSquareChecked"
                 *ngIf="filterService.dateRangeFilter === DateRangeFilter.LONG_TERM"></fa-icon>
        <fa-icon [icon]="faSquare"
                 *ngIf="filterService.dateRangeFilter !== DateRangeFilter.LONG_TERM"></fa-icon>
        <span>Langzeit</span>
        <!--    <span>1999 - 2020</span>-->
    </div>

    <dropdown *ngIf="filterService.monthly" class="date-range">
        <div button>
            September 2022
        </div>

        <div dropdown
             style="display: grid; grid-template-rows: calc(1.3rem * 12 * 1.4); font-size: 1.3rem; grid-template-columns: repeat(3, auto); line-height: 1.4">
            <div style="">
                <div>Januar</div>
                <div>Februar</div>
                <div>März</div>
                <div>April</div>
                <div>Mai</div>
                <div>Juni</div>
                <div>Juli</div>
                <div>August</div>
                <div>September</div>
                <div>Oktober</div>
                <div>November</div>
                <div>Dezember</div>
            </div>

            <hr>

            <div style="overflow-y: scroll">
                <div *ngFor="let year of getYears()">{{year}}</div>
            </div>
        </div>
    </dropdown>
</nav>

<main>
    <section class="chart-tile">
        <h1>Temperatur</h1>

        <div class="summary">
            &#x2b9f; {{currentData?.value?.summary?.minTemperature?.toFixed(1)}}°C
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#8960; {{currentData?.value?.summary?.avgTemperature?.toFixed(1)}}°C
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxTemperature?.toFixed(1)}}°C
        </div>

        <min-avg-max-chart class="chart"
                           [color]="'hsl(0, 80%, 45%)'" [fill]="'hsla(0, 80%, 45%, 0.3)'"
                           [min]="'minTemperature'" [avg]="'avgTemperature'" [max]="'maxTemperature'"
                           [filterComponent]=currentData [resolution]="getChartResolution()"
                           (click)="showDetails('temperature')"></min-avg-max-chart>
    </section>

    <section class="chart-tile">
        <h1>Sonnenschein</h1>

        <div class="summary">&#931; {{divideBy60(currentData?.value?.summary?.sunshineDuration)?.toFixed(1)}}h</div>

        <sum-chart class="chart" [fill]="'hsl(40, 100%, 50%)'" [sum]="'sunshineDuration'"
                   [valueConverter]="divideBy60" [resolution]="getChartResolution()"
                   [filterComponent]=currentData></sum-chart>
    </section>

    <section class="chart-tile">
        <h1>Niederschlag</h1>

        <div class="summary">
            <fa-icon [icon]="faRain"></fa-icon>
            {{currentData?.value?.summary?.rainfall?.toFixed(1)}}l/m²
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            <fa-icon [icon]="faSnow"></fa-icon>
            {{currentData?.value?.summary?.snowfall?.toFixed(1)}}mm
        </div>

        <sum-chart class="chart" [fill]="'hsl(240, 100%, 50%)'" [fill2]="'hsl(40, 0%, 80%)'" [sum]="'rainfall'"
                   [resolution]="getChartResolution()"
                   [filterComponent]=currentData></sum-chart>
    </section>

    <section class="chart-tile">
        <h1>Wind</h1>

        <div class="summary">
            &#8960; {{currentData?.value?.summary?.avgWindspeed?.toFixed(1)}}m/s
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxWindspeed?.toFixed(1)}}m/s
        </div>

        <min-avg-max-chart class="chart" [color]="'hsl(270, 80%, 65%)'" [fill]="'hsla(270, 80%, 65%, 0.3)'"
                           [avg]="'avgWindspeed'" [max]="'maxWindspeed'" [resolution]="getChartResolution()"
                           [filterComponent]=currentData></min-avg-max-chart>
    </section>


    <section class="chart-tile">
        <h1>Windrichtung</h1>

        <div class="summary">
            &#8960; {{currentData?.value?.summary?.avgWindspeed?.toFixed(1)}}m/s
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxWindspeed?.toFixed(1)}}m/s
        </div>

        <div></div>
    </section>

    <section class="chart-tile">
        <h1>Luftfeuchtigkeit</h1>

        <div class="summary">
            &#x2b9f; {{currentData?.value?.summary?.minHumidity?.toFixed(1)}}%
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#8960; {{currentData?.value?.summary?.avgHumidity?.toFixed(1)}}%
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxHumidity?.toFixed(1)}}%
        </div>

        <min-avg-max-chart class="chart" [color]="'hsl(220, 80%, 30%)'" [fill]="'hsla(220, 80%, 30%, 0.3)'"
                           [min]="'minHumidity'" [avg]="'avgHumidity'" [max]="'maxHumidity'"
                           [resolution]="getChartResolution()"
                           [filterComponent]=currentData></min-avg-max-chart>
    </section>

    <section class="chart-tile">
        <h1>Taupunkt</h1>

        <div class="summary">
            &#x2b9f; {{currentData?.value?.summary?.minDewPointTemperature?.toFixed(1)}}°C
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#8960; {{currentData?.value?.summary?.avgDewPointTemperature?.toFixed(1)}}°C
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxDewPointTemperature?.toFixed(1)}}°C
        </div>

        <min-avg-max-chart class="chart" [color]="'hsl(220, 80%, 70%)'" [fill]="'hsla(220, 80%, 70%, 0.3)'"
                           [min]="'minDewPointTemperature'" [avg]="'avgDewPointTemperature'"
                           [max]="'maxDewPointTemperature'" [resolution]="getChartResolution()"
                           [filterComponent]=currentData></min-avg-max-chart>
    </section>

    <section class="chart-tile">
        <h1>Luftdruck</h1>

        <div class="summary">
            &#x2b9f; {{currentData?.value?.summary?.minAirPressure?.toFixed(1)}}hPa
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#8960; {{currentData?.value?.summary?.avgAirPressure?.toFixed(1)}}hPa
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxAirPressure?.toFixed(1)}}hPa
        </div>

        <min-avg-max-chart class="chart" [color]="'hsl(120, 80%, 45%)'" [fill]="'hsla(120, 80%, 45%, 0.15)'"
                           [min]="'minAirPressure'" [avg]="'avgAirPressure'" [max]="'maxAirPressure'"
                           [includeZero]=false [resolution]="getChartResolution()"
                           (click)="showDetails('airPressure')"
                           [filterComponent]=currentData></min-avg-max-chart>
    </section>

    <section class="chart-tile">
        <h1>Sichtweite</h1>

        <div class="summary">
            &#x2b9f; {{currentData?.value?.summary?.minVisibility?.toFixed(0)}}m
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#8960; {{currentData?.value?.summary?.avgVisibility?.toFixed(0)}}m
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            &#x2b9d; {{currentData?.value?.summary?.maxVisibility?.toFixed(0)}}m
        </div>

        <min-avg-max-chart class="chart" [color]="'hsl(0, 0%, 70%)'" [fill]="'hsla(0, 0%, 70%, 0.3)'"
                           [logarithmic]="true" [resolution]="getChartResolution()"
                           [ticks]="[{value: 10, label: '10'}, {value: 100, label: '100'}, {value: 1000, label: '1km'}, {value: 10000, label: '10km'}, {value: 100000, label: '100km'}]"
                           [min]="'minVisibility'" [avg]="'avgVisibility'" [max]="'maxVisibility'"
                           [filterComponent]=currentData></min-avg-max-chart>
    </section>

    <section class="chart-tile">
        <h1>Bewölkung</h1>

        <div class="summary">
            <fa-icon [icon]="faSun"></fa-icon>
            {{percentageOfCloudCoverage(currentData?.value?.summary?.cloudCoverage, [0, 1, 2])}}
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            <fa-icon [icon]="faCloudSun"></fa-icon>
            {{percentageOfCloudCoverage(currentData?.value?.summary?.cloudCoverage, [3, 4, 5])}}
            &nbsp;&nbsp;&#x25CF;&nbsp;&nbsp;
            <fa-icon [icon]="faCloud"></fa-icon>
            {{percentageOfCloudCoverage(currentData?.value?.summary?.cloudCoverage, [6, 7, 8, 9])}}
        </div>

        <histogram-chart class="chart" [filterComponent]=currentData
                         [resolution]="getChartResolution()"></histogram-chart>
    </section>
</main>

<div class="dropdown-background" #dropdownBackground></div>
